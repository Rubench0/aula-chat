<div class="container white">
  <nav-chat></nav-chat>
  <div class="row" style="margin-top: -20px;">
    <div class="col" [ngClass]="{'s8':smallResolution | async,'s12':!smallResolution | async}">
      <div class="row">
        <div class="col s12">
          <div class="div-chat" #divChat>
            <div #messages  class="row valign-wrapper row-chat" *ngFor="let m of conversation" >
              <ng-container *ngIf="m.sender == user.uid; else messageI">
                <div class="col s10 message">
                    <span><b>{{ getUserNickById(m.sender) }}</b></span><br>
                    <span *ngIf="m.type == 'image'" ><img src="{{ m.text }}" ></span>
                    <span *ngIf="m.type == 'text'" >{{ m.text }}</span><br>
                    <span class="right" style="font-size: 10px;">{{ m.timestamp | date: 'short' }}</span>
                    <span *ngIf="!see" class="grey-text" ><i class="material-icons" style="font-size: 18px;">done_all</i></span>
                </div>
                <div class="col s2">
                  <div [ngClass]="{'img-message-chat': !smallResolution | async}">
                    <img src="assets/sidenav-demo-avatar.png" class="circle responsive-img">
                  </div>
                </div>
              </ng-container>
              <ng-template #messageI>
                  <div class="col s2">
                      <div [ngClass]="{'img-message-chat': !smallResolution | async}" class="right">
                      <img src="assets/sidenav-demo-avatar.png" class="circle responsive-img">
                    </div>
                  </div>
                  <div class="col s10 message">
                      <span><b>{{ getUserNickById(m.sender) }}</b></span><br>
                      <span>{{ m.text }}</span><br>
                      <span class="right" style="font-size: 10px;">{{ m.timestamp | date: 'short' }}</span>
                      <span *ngIf="!see" class="grey-text" ><i class="material-icons" style="font-size: 18px;">done_all</i></span>
                  </div>
              </ng-template>
            </div>
            <image-cropper
                [imageChangedEvent]="imageChangedEvent"
                [maintainAspectRatio]="true"
                format="png"
                (imageCropped)="imageCropped($event)"
                (imageLoaded)="imageLoaded()"
                (cropperReady)="cropperReady()"
                (loadImageFailed)="loadImageFailed()"
            ></image-cropper>
            <img [src]="croppedImage" />
          </div>
        </div>
      </div>
      <div class="row" >
        <div class="col s12">
          <textarea class="materialize-textarea chat-textarea" [(ngModel)]="textMessage" (keyup.enter)="sendMessage()" ></textarea>
        </div>
        <div class="col s12 right">
            <button class="" type="button" name="action" (click)="sendImage()"><i class="material-icons">send</i>
            </button>
            <label for="file" class="btn" ><i class="material-icons">image</i></label>
            <input type="file" name="file" id="file" (change)="fileChangeEvent($event)" />
        </div>
      </div>
    </div>
    <div class="col s4" *ngIf="smallResolution | async">
      <div style="margin-top:20px;">
        <app-tab-resource-class></app-tab-resource-class>
      </div>
    </div>
  </div>
</div>

<mz-dropdown
  [id]="'dropdown-demo'"
  [align]="'right'"
  [belowOrigin]="true"
  [constrainWidth]="true"
  [dropdownButtonId]="'btn-dropdown'"
  [gutter]="true"
  [stopPropagation]="true"
>
  <mz-dropdown-item><a href="#!">One</a></mz-dropdown-item>
  <mz-dropdown-item><a href="#!">Two</a></mz-dropdown-item>
  <mz-dropdown-divider></mz-dropdown-divider>
  <mz-dropdown-item><a href="#!">Three</a></mz-dropdown-item>
</mz-dropdown>

                  <!-- <ul class="collection with-header">
                      <li class="collection-header"><h6>Participantes</h6></li>
                      <ng-container *ngFor="let friend of friends | search: query; let i = index;">
                        <li class="collection-item avatar" *ngIf="friend.friend == true">
                          <img src="assets/sidenav-demo-avatar.png" alt="" class="circle">
                          <span class="title">{{ friend.nick }}</span>
                          <a href="#!" class="secondary-content">
                            {{friend.status}}
                            <i class="material-icons">grade</i>
                          </a>
                        </li>
                      </ng-container>
                    </ul> -->
